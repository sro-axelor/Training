<?xml version="1.0" encoding="UTF-8"?>

<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views
  http://axelor.com/xml/ns/object-views/object-views_5.4.xsd">

	<grid name="item-grid" title="Item grid"
		model="com.axelor.action.db.Item">
		<field name="itemCode" />
		<field name="itemName" />
	</grid>

	<form name="item-form" title="Item form"
		model="com.axelor.action.db.Item">
		<panel>
			<field name="itemCode" />
			<field name="itemName" />
		</panel>	
		
		<panel>
			<button onClick="create.item" name="action-script-custom-models" title="Action-Script Custom-Models" colSpan="4"/>
		</panel>	
	</form>
	
	<!-- action-script can be used for custom models too -->
	<action-script name="create.item" model="com.axelor.meta.db.MetaJsonRecord">
	  <script language="js" transactional="true">
	  <![CDATA[	
			    var item = $json.create('item');
			    item.itemCode = 1;  
			    item.itemName = "bag";            
					
			    var order = $json.all('order').by('orderName', '=', 'flipkart').fetchOne();  
	 		    if (order == null) { 
		        order = $json.create('order'); 
		        order.orderName = "amazon"; 
	 	        order = $json.save(order); 
	 		   }
	 		   item.orderes = order;  
	 		    
	 		   // return as response values 
	 		   $response.values = item; 
	 		       ]]> 
		  </script>
	</action-script>
</object-views>